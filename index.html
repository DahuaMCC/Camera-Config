<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>JQuery Dahua Tools</title>
<link href="css/styles.css" rel="stylesheet" type="text/css">
</head>

<body>
<h1>Dahua Multi Camera Config</h1>
<form action="" method="post" name="form1" class="greybg">
  <p>Ip Range</p>
  <p>
    <label>Start</label>
    <input name="ipstart" type="text" id="ipstart" value="192.168.1.40">
    <label>End</label>
    <input name="ipend" type="text" id="ipend" value="192.168.1.59">
  </p>
  <p><label>Command</label>&nbsp; 
    <input name="dahuaAPIcommand" type="text" id="dahuaAPIcommand" value="configManager.cgi?action=getConfig&amp;name=VideoColor" size="80">
  </p>
  <p>
    <input type="submit" name="Submit" id="Submit" value="Run Commands">
  </p>
</form>
<p>&nbsp;</p>
<p>This demonstrates connecting via api to multiple cameras to get current settings:</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
<script>
//input html api commands for each cammera and output of the call will be dynamically displayed
var sites = [
    'http://admin:admin@192.168.1.40/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.41/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.42/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.43/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.44/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.45/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.46/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.47/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.48/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.49/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.50/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.51/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.52/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.53/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.54/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.55/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.56/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.57/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.58/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
    'http://admin:admin@192.168.1.59/cgi-bin/configManager.cgi?action=getConfig&name=VideoColor',
];
var arrayLength = sites.length;
for (var i=0; i < arrayLength; i++) {
		$('body').append('<p id="output' + i + '">');
		$.ajax({
			url: 'proxy.php',
			type: 'POST',
			async: false,
			data: {
				address: 
				sites[i]
				},
			//output http commands & responses
			success: function(response) {
				$('body').append(sites[i]);
				$('body').append('</br>' + response);
				}
		});
		$('body').append('</p>');
};
</script>

</body>
</html>
